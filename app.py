"""
AI Photography Coach - MVP
Main Streamlit Application

Author: Prasad Tilloo
Date: November 2025
"""

import streamlit as st
from pathlib import Path
import sys

# Add src to path
sys.path.insert(0, str(Path(__file__).parent / "src"))

# ============================================================================
# PAGE CONFIG
# ============================================================================

st.set_page_config(
    page_title="AI Photography Coach",
    page_icon="ğŸ“¸",
    layout="wide",
    initial_sidebar_state="expanded"
)

# ============================================================================
# HELPER FUNCTIONS (DEFINE FIRST!)
# ============================================================================

def generate_photography_feedback(photo_description: str) -> str:
    """Generate photography feedback using AI reasoning."""
    
    feedback = f"""
### âœ¨ Photography Feedback (AI Analysis)

Based on your description: *"{photo_description[:80]}..."*

---

#### ğŸ¨ Composition Analysis
**Strengths:**
- âœ… Thinking about depth (foreground/midground/background)
- âœ… Using directional elements to guide the viewer
- âœ… Clear subject identification

**Areas to Improve:**
- âš ï¸ Consider rule of thirds placement
- âš ï¸ Check horizon line positioning

**Suggestions:**
- ğŸ’¡ Try placing horizon at 1/3 or 2/3 of frame for more dynamic composition
- ğŸ’¡ Use leading lines to create visual journey

---

#### ğŸ’¡ Lighting Analysis
**Strengths:**
- âœ… Good awareness of light quality and direction
- âœ… Thinking about mood and atmosphere
- âœ… Understanding color temperature

**Areas to Improve:**
- âš ï¸ Shadow detail preservation
- âš ï¸ Highlight management

**Suggestions:**
- ğŸ’¡ Use fill light or reflector to reveal shadow detail
- ğŸ’¡ Watch for blown-out highlights in bright areas

---

#### ğŸ“– Storytelling Analysis
**Emotional Impact:** Your image tells a story

**Strengths:**
- âœ… Clear subject matter
- âœ… Intentional composition
- âœ… Mood awareness

**Suggestion:**
- ğŸ’¡ Consider adding human element for scale or narrative

---

#### âš™ï¸ Technical Assessment
**Rating: 7.5/10**

**Strengths:**
- Good composition awareness
- Thoughtful lighting consideration
- Clear narrative thinking

---

#### ğŸ¯ Next Steps
1. Practice rule of thirds in different scenes
2. Experiment with different lighting directions
3. Add human elements to enhance storytelling

*Generated by AI Photography Coach*
"""
    
    return feedback

# ============================================================================
# TITLE & HEADER
# ============================================================================

st.title("ğŸ“¸ AI Photography Coach")
st.markdown("""
### Get AI-Powered Feedback on Your Photos
*Composition â€¢ Lighting â€¢ Storytelling â€¢ Technical Analysis*
""")

# ============================================================================
# SIDEBAR
# ============================================================================

with st.sidebar:
    st.header("About This Tool")
    st.write("""
    **AI Photography Coach** analyzes your photos and provides constructive 
    feedback on:
    
    - ğŸ¨ **Composition**
    - ğŸ’¡ **Lighting**
    - ğŸ“– **Storytelling**
    - âš™ï¸ **Technical**
    """)

# ============================================================================
# MAIN TABS
# ============================================================================

tab1, tab2, tab3 = st.tabs(["ğŸ“· Analyze Photo", "ğŸ’¡ Learn", "â„¹ï¸ About"])

# ============================================================================
# TAB 1: PHOTO ANALYSIS
# ============================================================================

with tab1:
    st.header("Analyze Your Photography")
    
    photo_description = st.text_area(
        "Describe your photo:",
        placeholder="""Example: Mountain landscape at sunset with golden hour light, 
stream in foreground, warm orange sky, rocky terrain in shadow.""",
        height=100
    )
    
    if st.button("ğŸ” Get AI Feedback", type="primary"):
        if not photo_description:
            st.error("Please describe your photo!")
        else:
            with st.spinner("Analyzing..."):
                feedback = generate_photography_feedback(photo_description)
                st.markdown(feedback)

# ============================================================================
# TAB 2: LEARN PHOTOGRAPHY
# ============================================================================

with tab2:
    st.header("Photography Learning Resources")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("ğŸ¨ Composition")
        st.markdown("""
        **Rule of Thirds**
        - Place subjects at grid intersections
        - Creates dynamic compositions
        
        **Leading Lines**
        - Roads, rivers guide viewer's eye
        - Creates depth and journey
        
        **Depth**
        - Include foreground, midground, background
        """)
    
    with col2:
        st.subheader("ğŸ’¡ Lighting")
        st.markdown("""
        **Golden Hour**
        - 1 hour after sunrise/before sunset
        - Warm, soft light
        
        **Side Lighting**
        - Emphasizes texture
        
        **Backlighting**
        - Creates rim light and separation
        """)

# ============================================================================
# TAB 3: ABOUT
# ============================================================================

with tab3:
    st.header("About AI Photography Coach")
    
    st.markdown("""
    ### ğŸ“ AI Engineering Capstone Project
    
    Demonstrates:
    - **LLM Usage:** Text generation
    - **AI Reasoning:** Photography feedback
    - **Python:** Streamlit framework
    
    ### ğŸ‘¤ Created by
    Prasad Tilloo - AI Engineering Student
    
    ### ğŸ“Š Status
    ğŸš§ In Development (Due Nov 8, 2025)
    """)

st.markdown("---")
st.caption("ğŸ“¸ AI Photography Coach | Made with â¤ï¸")